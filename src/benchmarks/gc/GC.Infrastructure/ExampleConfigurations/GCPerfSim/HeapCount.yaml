run:

  startup_server:
    environment_variables:
      COMPlus_GCServer: 1

  startup_workstation:
    environment_variables:
      COMPlus_GCServer: 0

  startup_heaphardlimit:
    environment_variables:
      COMPlus_GCHeapHardLimit: 0x800000000

  startup_heaphardlimit_largepages:
    environment_variables:
      COMPlus_GCLargePages: 1
      COMPlus_GCHeapHardLimit: 0x800000000

  startup_heaphardlimitsohpohloh:
    environment_variables:
      COMPlus_GCHeapHardLimitSOH: 0x800000000
      COMPlus_GCHeapHardLimitLOH: 0x800000000
      COMPlus_GCHeapHardLimitPOH: 0x0

  startup_heaphardlimitsohpohloh_largepages:
    environment_variables:
      COMPlus_GCHeapHardLimitSOH: 0x800000000
      COMPlus_GCHeapHardLimitLOH: 0x800000000
      COMPlus_GCHeapHardLimitPOH: 0x0
      COMPlus_GCLargePages: 1

  startup_cpuaffinity:
    environment_variables:
      COMPlus_GCHeapHardLimitSOH: 0x800000000
      COMPlus_GCHeapHardLimitLOH: 0x800000000
      COMPlus_GCHeapHardLimitPOH: 0x0
      COMPlus_GCLargePages: 1

# Top level microbenchmark configuration.
gcperfsim_configurations:
  parameters:
    tc: 18
    tagb: 5
    tlgb: 0 
    lohar: 0
    pohar: 0
    sohsr: 100-4000
    lohsr: 102400-204800
    pohsr: 100-204800
    sohsi: 0 
    lohsi: 0
    pohsi: 0
    sohpi: 0 
    lohpi: 0
    sohfi: 0
    lohfi: 0
    pohfi: 0
    allocType: reference
    testKind: time
  # TODO: Make this mandatory.
  gcperfsim_path: "C:\\performance\\artifacts\\bin\\GCPerfSim\\release\\net7.0\\GCPerfSim.dll"

environment_variables:
  COMPlus_GCServer: 0 
  #COMPlus_GCHeapCount: 10 

# Configurations that involve capturing a trace.
trace_configurations:
  type: gc # Choices: gc, verbose, cpu, threadtime, none

output: 
  path: "C:\\GCPerfSimRun_HeapCount_1\\"
  percentage_disk_remaining_to_stop_per_run: 0 
  formats:
    - markdown
    - json
  additional_report_metrics:
  cpu_columns:
  columns:
    - gc count
    - induced gc count
    - max size peak (mb)
    - total allocated (mb)
    - total pause time (msec)
    - gc pause time %
  all_columns:
    - gc count
    - non induced gc count
    - induced gc count
    - total allocated (mb)
    - max size peak (mb)
    - total pause time (msec)
    - gc pause time %
    - avg. heap size (mb)